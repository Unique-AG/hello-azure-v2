env:
  CHAT_API_URL: http://backend-service-chat.unique.svc
  CONVERT_OFFICE_FILES_TO_PDF: "true"
  CUSTOM_API_DEFINITIONS: >-
    [ {"identifier": "Unique Text Extraction API", "url": "http://assistants-core.unique.svc/core/text-extractions"},{"identifier": "Agentic Ingestion API", "url": "http://agentic-ingestion.chat.svc.cluster.local:8081/agentic-ingestion"}  ]
  EMBEDDING_BATCH_SIZE: 16
  FEATURE_FLAG_ENABLE_LANDSCAPED_PDF_PAGE_BASED_CHUNKING_UN_10606: "true"
  FEATURE_FLAG_ENABLE_PPT_PAGE_BASED_CHUNKING_UN_9444: "true"
  INGESTION_API_URL: http://backend-service-ingestion.unique.svc
  INGESTION_QUEUE: queue
  LOG_LEVEL: info
  MAX_HEAP_MB: 850
envVars:
  - name: RABBITMQ_USERNAME #! FIXME: @evrim should refactor to respect AMQP_USERNAME as well
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: username
  - name: AMQP_USERNAME
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: username
  - name: RABBITMQ_PASSWORD #! FIXME: @evrim should refactor to respect AMQP_PASSWORD as well
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: password
  - name: AMQP_PASSWORD
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: password
  - name: AMQP_HOST
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: host
  - name: AMQP_PORT
    valueFrom:
      secretKeyRef:
        name: rabbitmqcluster-chat-default-user
        key: port
keda:
  enabled: true
  minReplicaCount: 0
  maxReplicaCount: 5
  triggers: {}  # Triggers will be defined in ArgoCD application valuesObject
  extraAnnotations:
    argocd.argoproj.io/sync-wave: "10"

nodeSelector:
  scalability: rapid
  lifecycle: ephemeral
tolerations:
  - key: "scalability"
    operator: "Equal"
    value: "rapid"
    effect: "NoSchedule"
  - key: "lifecycle"
    operator: "Equal"
    value: "ephemeral"
    effect: "NoSchedule"
probes:
  liveness:
    failureThreshold: 36
replicaCount: 1
resources:
  limits:
    cpu: 0.5
    memory: 1050Mi
  requests:
    cpu: 0.5
    memory: 1Gi
serviceAccount:
  enabled: true
  workloadIdentity:
    enabled: true
terminationGracePeriodSeconds: 900
volumeMounts:
  - mountPath: /tmp
    name: tmp-volume
volumes:
  - emptyDir:
      sizeLimit: 20Gi
    name: tmp-volume
